<!--
#  Copyright 2007, Javid Jamae and Peter Johnson
# 
#  Licensed under the Apache License, Version 2.0 (the "License"); you may not
#  use this file except in compliance with the License. You may obtain a copy
#  of the License at
# 
#     http://www.apache.org/licenses/LICENSE-2.0
#  
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
#  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
#  License for the specific language governing permissions and limitations
#  under the License.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>

<head>
<title>JBIA - JBoss Clustering</title>
<link rel="STYLESHEET" href="../ch00/image/jbia.css" type="text/css" />
</head>

<body>

<h1>Ch 12 &amp; 13 - JBoss Clustering</h1>
<p>All build targets create two application server configurations named <code>
node1</code> and <code>node2</code>. Due to an issue with Ant, empty directories do not get extracted from the JBoss
distribution properly. In order for the clustering examples to work, you'll have to create an empty directory called 
<code>deploy-hasingleton</code> under the <code>server</code> directory for both <code>node1</code> and <code>node2</code>.

<p>After the build, follow the directions in section 12.2.1 of the book 
to configure your machine to start two different IP addresses to run your nodes on. On Linux you'll use localhost 
and your machine name, on Windows, we show you how to setup two IPs (we use 192.168.1.140 and 192.168.1.141). To run 
the application  servers, open two command windows, <code>cd</code> to the applications server's <code>bin</code> 
directory in each, and enter the following in one window:</p>
<table class="command">
  <tr>
    <td class="commandText">./run.sh –c node1 –b localhost –Djboss.messaging.ServerPeerID=1</td>
    <td>(Linux)</td>
  </tr>
  <tr>
    <td class="commandText">run –c node1 –b 192.168.1.140 –Djboss.messaging.ServerPeerID=1</td>
    <td>(Windows)</td>
  </tr>
</table>
<p>Then enter the following in the other:</p>
<table class="command">
  <tr>
    <td class="commandText">./run.sh –c node2 –b [machine name] –Djboss.messaging.ServerPeerID=2</td>
    <td>(Linux)</td>
  </tr>
  <tr>
    <td class="commandText">run –c node2 –b 192.168.1.141 –Djboss.messaging.ServerPeerID=2</td>
    <td>(Windows)</td>
  </tr>
</table>
<p>None of the targets creates a database.</p>
<hr />
<table class="target">
  <tr>
    <th>Target:</th>
    <td class="targetNumber">01</td>
  </tr>
  <tr>
    <th>Section:</th>
    <td>12.2</td>
  </tr>
  <tr>
    <th>Description:</th>
    <td>Creates a two node cluster and deploys an EJB load balancing example to it.</td>
  </tr>
  <tr>
    <th colspan="2">After the build:</th>
  </tr>
</table>
<p>After building and starting both servers, run the 01-client target to see a counter load balance across the two servers.</p>
<hr />
<p align="center">© 2007, Javid Jamae and Peter Johnson</p>
</body>

</html>
